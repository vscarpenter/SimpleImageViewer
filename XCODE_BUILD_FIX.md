# Xcode Build Fix Instructions

## Problem
The Xcode project is missing several Swift files that were created in the `Services/AIAnalysis/` directory. These files exist in the filesystem but are not referenced in the Xcode project file.

## Missing Files
The following files need to be added to the Xcode project:

1. `StillView - Simple Image Viewer/Services/AIAnalysis/SpecificityEnhancer.swift`
2. `StillView - Simple Image Viewer/Services/AIAnalysis/ContextAnalyzer.swift`
3. `StillView - Simple Image Viewer/Services/AIAnalysis/ConfidenceEvaluator.swift`
4. `StillView - Simple Image Viewer/Services/AIAnalysis/SemanticComposer.swift`
5. `StillView - Simple Image Viewer/Services/AIAnalysis/CaptionStyleFormatter.swift`
6. `StillView - Simple Image Viewer/Services/AIAnalysis/CaptionLanguageManager.swift`

## Solution

### Option 1: Add Files via Xcode (Recommended)
1. Open `StillView - Simple Image Viewer.xcodeproj` in Xcode
2. In the Project Navigator, locate the `Services/AIAnalysis` folder
3. Right-click on the `AIAnalysis` folder and select "Add Files to 'StillView - Simple Image Viewer'..."
4. Navigate to `StillView - Simple Image Viewer/Services/AIAnalysis/`
5. Select all 6 missing files listed above
6. Make sure "Copy items if needed" is **unchecked** (files are already in the right location)
7. Make sure "Add to targets" has "StillView - Simple Image Viewer" **checked**
8. Click "Add"
9. Build the project again

### Option 2: Remove and Re-add the AIAnalysis Folder
1. Open `StillView - Simple Image Viewer.xcodeproj` in Xcode
2. In the Project Navigator, right-click on the `AIAnalysis` folder under `Services`
3. Select "Delete" and choose "Remove Reference" (do NOT move to trash)
4. Right-click on the `Services` folder
5. Select "Add Files to 'StillView - Simple Image Viewer'..."
6. Navigate to and select the `StillView - Simple Image Viewer/Services/AIAnalysis` folder
7. Make sure "Create groups" is selected
8. Make sure "Add to targets" has "StillView - Simple Image Viewer" checked
9. Click "Add"
10. Build the project again

## Additional Issues to Fix

After adding the files, there are also some code issues that need to be fixed:

### 1. SmartTag Initialization
The `SmartTag` struct now requires an `isAutoGenerated` parameter. Update all SmartTag initializations in `SmartTagGenerator.swift` to include this parameter.

### 2. Missing TagCategory
The `SmartTag.TagCategory` enum is missing the `.useCase` case. This needs to be added to the enum definition.

### 3. Missing ImagePurpose Case
The `ImagePurpose` enum is missing the `.architecture` case. This needs to be added to handle all switch cases.

## Verification
After making these changes, run:
```bash
xcodebuild -project "StillView - Simple Image Viewer.xcodeproj" -scheme "StillView - Simple Image Viewer" -configuration Debug build
```

The build should complete successfully.
